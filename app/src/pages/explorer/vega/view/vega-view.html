<div class="vega-view">
    <div class="utility-content__result">
    <div class="utility-gridicon" v-if="!loading">
        <div>
        <md-button class="md-icon-button" @click.native.prevent="navBack">
            <md-tooltip> Go Back </md-tooltip>
            <md-icon>arrow_back</md-icon>
        </md-button>
        </div>
        <div>
            <mdDialog :title="'Share Chart'">
                <template v-slot:button>
                    <md-button class="md-icon-button">
                        <md-tooltip> Share Chart </md-tooltip>
                        <md-icon>share</md-icon>
                    </md-button>
                </template>
                <template v-slot:content>
                    Link to chart
                </template>
            </mdDialog>
        </div>
        <div v-if="chart.query">
            <mdDialog :title="'Preview Chart Query'">
                <template v-slot:button>
                    <md-button class="md-icon-button">
                        <md-tooltip> Preview Chart Query </md-tooltip>
                        <md-icon>preview</md-icon>
                    </md-button>
                </template>
                <template v-slot:content>
                    <div class="viz-intro-query">
                        <yasqe v-model="chart.query" :showBtns='true'></yasqe>
                    </div>
                </template>
            </mdDialog>
        </div>
        <div>
            <mdDialog :title="'View Data as Table'">
                <template v-slot:button>
                    <md-button class="md-icon-button">
                        <md-tooltip> View Data as Table </md-tooltip>
                        <md-icon>table_view</md-icon>
                    </md-button>
                </template>
                <template v-slot:content>
                    <div class="viz-intro-query" style="min-height: 40rem !important">
                        <yasr :results="results"></yasr>
                    </div>
                </template>
            </mdDialog>
        </div>
        <div>
            <mdDialog :title="'Chart Vega Spec'">
                <template v-slot:button>
                    <md-button class="md-icon-button">
                        <md-tooltip> Preview Chart Spec </md-tooltip>
                        <md-icon>integration_instructions</md-icon>
                    </md-button>
                </template>
                <template v-slot:content>
                    <md-content>
                    <v-jsoneditor
                        v-model="specViewerSpec"
                        :options="specViewer.jsonEditorOpts"
                    >
                    </v-jsoneditor>
                    </md-content>
                    <div class="vega-spec-controls">
                        <md-checkbox v-model="specViewer.includeData">Include data in spec</md-checkbox>
                    </div>
                </template>
            </mdDialog>
        </div>
        <div>
        <md-button class="md-icon-button" @click.native.prevent="openVoyager()">
            <md-tooltip> View Data in Voyager </md-tooltip>
            <md-icon>dynamic_form</md-icon>
        </md-button>
        </div>
        <div v-if="allowEdit">
        <md-button class="md-icon-button" @click.native.prevent="editChart">
            <md-tooltip> Edit Chart </md-tooltip>
            <md-icon>edit</md-icon>
        </md-button>
        </div>
    </div>
    </div>

<div class="md-layout md-gutter md-alignment-top-center">
    <div class="md-layout-item  md-size-35 md-small-size-100">
    <div class="loading-dialog_justify">
        <div class="visualize">
        <div class="viz-sample__header" v-if="vizOfTheDay">
            <md-icon style="font-size: 2rem !important; color: gray !important">bar_chart</md-icon> Viz of the day
        </div>
        <div class="viz-sample__header" v-if="!vizOfTheDay">
            Chart Information
        </div>
        <div class="viz-sample__content">
            <div class="">
            <div class="md-headline viz-u-mgup-sm btn--animated">{{chart.title}}</div>
            <div class="btn--animated">
                {{ slugify(chart.description) }}
            </div>
            <div class="viz-sample__list btn--animated">
                <ul>
                <li class="viz-u-postion__rel" v-for="(tag, index) in chartTags" :key="index">
                    <div class="viz-sample__content__card viz-u-display__hide viz-u-postion__abs">
                    {{ tag.description }}
                    <div><a class="btn-text btn-text--simple" target="_blank" :href="tag.uri">More</a></div>
                    </div>
                    {{ tag.title }}
                </li>
                </ul>
            </div>
            </div>
        </div>

        </div>
    </div>
    </div>
    <div class="md-layout-item md-size-60 md-small-size-100">
    <div class="loading-dialog" style="margin: 5rem" v-if="loading">
        <spinner :loading="loading" :text="'Loading chart data'"/>
    </div>
    <div class="loading-dialog" style="margin: auto" v-else>
        <div class="viz-u-display__desktop" style="margin-bottom: 2rem"/>
        <vega-lite :spec="spec" class="btn--animated vega-embed-chartview"/>
        <a @click.prevent="navBack(true)" class="btn btn_small btn--primary utility-margin-big viz-u-display__ph" v-if="vizOfTheDay">View Gallery</a>
    </div>
    <data-voyager v-if="voyager.show" :data="spec.data"></data-voyager>
    </div>
</div>
</div>
