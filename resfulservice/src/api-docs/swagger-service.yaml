openapi: 3.0.0
info:
  title: MaterialsMine Project API Docs
  description: As MaterialsMine continues to expand, we are committed to facilitating materials research development and
    welcome feedback and suggestions for further improvements to help you benchmark and visualize your data, explore your 
    research hypotheses, perform simulations and analysis using our available tools, and more.
  version: 1.0.0
  termsOfService:
  contact:
    name:
    email:
servers:
  
paths:
  /admin/es:
    get:
      security:
        - bearerAuth: [] 
      summary: Check the status of elastic search service
      tags:
        - Admin
      responses:
        '200':
          description: Returns true if ES service is up or false if ES service is down
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: boolean
                    example: true
        '401':
          description: User not authorized for this service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized-Error'
        '403':
          description: If user is forbidden from using the service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden-Error'
        '500':
          description: Elastic search upstream server response error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred
    post:
      security:
        - bearerAuth: [] 
      summary: Automatically configures & initializes elastic search service
      tags:
        - Admin
      responses:
        '200':
          description: Returns a successfully configure message
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        example: Successfully configured schemas!
        '401':
          description: User not authorized for this service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized-Error'
        '403':
          description: If user is forbidden from using the service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden-Error'
        '500':
          description: Elastic search upstream server response error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred
    put:
      tags:
        - Admin
      security:
        - bearerAuth: [] 
      summary: Add new resource into search service. Examples of a resource item are charts, samples or articles
      requestBody:
        description: New resource document payload to index in json
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  enum: [samples, charts, articles]
                doc:
                  type: object
                  properties:
                    label:
                      type: string
                      example: Glass Transition Temperature
                    identifier:
                      type: string
                      example: http://matmine.org/sample/l333-s5-salami-1000
                    thumbnail:
                      type: string
                      example: https://localhost/explorer/blob?=1441449bdf0cb480
                    description:
                      type: string
                      example: This chart of curated articles per year published is compact...
      responses:
        '200':
          description: Returns an object similar to the example below if successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: object
                    properties:
                      _index:
                        type: string
                        example: samples
                      _type:
                        type: string
                        example: _doc
                      _id:
                        type: string
                        example: VeMK7LYgBMY-vG6TxJk_N
                      _version:
                        type: number
                        example: 2
                      _shards:
                        type: object
                        properties:
                          total: 
                            type: number
                            example: 1000000
                          successful: 
                            type: number
                            example: 1
                          failed: 
                            type: number
                            example: 0
                      _seq_no:
                        type: number
                        example: 99999
                      _primary_term:
                        type: number
                        example: 36

        '401':
          description: User not authorized for this service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized-Error'
        '422':
          description: Missing required input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Missing-Input-Error'
        '500':
          description: Elastic search upstream server response error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred
    delete:
      security:
        - bearerAuth: [] 
      summary: Removes resource item from search service. Examples of a resource item are charts, samples or articles
      tags:
        - Admin
      requestBody:
        description: Details of resource document to remove from search service
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  enum: [samples, charts, articles]
                doc:
                  type: string
                  example: http://matmine.org/sample/l333-s5-salami-1000
      responses:
        '200':
          description: Returns an object response if deletion is successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: object
                    properties:
                      took:
                        type: number
                        example: 36
                      timed_out:
                        type: string
                        example: false
                      total:
                        type: number
                        example: 2
                      deleted:
                        type: number
                        example: 2
                      batches:
                        type: number
                        example: 1
                      version_conflicts:
                        type: number
                        example: 0
                      noops:
                        type: number
                        example: 0
                      retries:
                        type: object
                        properties:
                          bulk: 
                            type: number
                            example: 0
                          search: 
                            type: number
                            example: 0
                      throttled_millis:
                        type: number
                        example: 0
                      requests_per_second:
                        type: number
                        example: -1
                      throttled_until_millis:
                        type: number
                        example: 0
                      failures:
                        type: array
                        example: []

        '401':
          description: User not authorized for this service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized-Error'
        '422':
          description: Missing required input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Missing-Input-Error'
        '403':
          description: If user is forbidden from using the service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden-Error'
        '500':
          description: Elastic search upstream server response error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred
components:
  securitySchemes:
    bearerAuth:
      type: apiKey
      scheme: bearer
      name: Authorization
      in: header
      description: Use this format: Bearer &lt;API Key&gt;
  schemas:
    Unauthorized-Error: 
      type: object
      properties:
        message:
          type: string
          example: Not authenticated
    Forbidden-Error: 
      type: object
      properties:
        message:
          type: string
          example: User is forbidden
    Missing-Input-Error: 
      type: object
      properties:
        message:
          type: string
          example: Category type or doc is missing
